<odoo>

    <!-- ====== TEGEL OP /my (PORTAL HOME) ====== -->
<template id="portal_my_home_support" inherit_id="portal.portal_my_home">

    <xpath expr="//div[@id='portal_client_category']" position="inside">

        <div class="o_portal_index_card col-md-6 order-2">

            <a href="/my/tickets"
               class="d-flex gap-2 gap-md-3 py-3 pe-2 px-md-3 h-100 rounded text-decoration-none bg-100"
               title="Mijn tickets">

                <div class="o_portal_icon d-block align-self-start">
                    <i class="fa fa-life-ring fa-2x text-primary"/>
                </div>

                <div>
                    <div class="mt-0 mb-1 fs-5 fw-normal lh-1 d-flex gap-2">
                        <span>Mijn tickets</span>
                    </div>
                    <div class="opacity-75">
                        Bekijk en volg je supportvragen
                    </div>
                </div>

            </a>

        </div>

    </xpath>

</template>

    <!-- ====== TICKET LIJST ====== -->
    <template id="portal_my_tickets" name="My Tickets">
        <t t-call="portal.portal_layout">
            <div class="container mt-4">
                <h2>My Support Tickets</h2>

                <a href="/my/tickets/new" class="btn btn-primary mb-3">
                    Create New Ticket
                </a>

                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Ticket</th>
                            <th>Subject</th>
                            <th>Status</th>
                            <th>Created</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="tickets" t-as="t">
                            <tr>
                                <td>
                                    <a t-att-href="'/my/tickets/%s' % t.id">
                                        <t t-esc="t.ticket_ref"/>
                                    </a>
                                </td>
                                <td><t t-esc="t.name"/></td>
                                <td><t t-esc="t.state"/></td>
                                <td><t t-esc="t.create_date"/></td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>

    <!-- ====== TICKET DETAIL + REPLY ====== -->
    <template id="portal_ticket_detail" name="Ticket Detail">
        <t t-call="portal.portal_layout">
            <div class="container mt-4">
                <h2>
                    <t t-esc="ticket.ticket_ref"/> — <t t-esc="ticket.name"/>
                </h2>

                <p>Status: <strong><t t-esc="ticket.state"/></strong></p>

                <hr/>

                <h5>Conversation</h5>

                <t t-foreach="ticket.message_ids" t-as="msg">
                    <div class="card mb-2">
                        <div class="card-body">
                            <small class="text-muted">
                                <t t-esc="msg.author_id.name"/> —
                                <t t-esc="msg.date"/>
                            </small>
                            <div t-raw="msg.body"/>
                        </div>
                    </div>
                </t>

                <hr/>

                <h5>Reply</h5>

                <form action="/mail/message/post" method="post">
                    <input type="hidden" name="model" value="support.ticket"/>
                    <input type="hidden" name="res_id" t-att-value="ticket.id"/>
                    <textarea name="body" class="form-control" rows="4" required="required"/>
                    <br/>
                    <button class="btn btn-primary">Send Reply</button>
                </form>

            </div>
        </t>
    </template>

    <!-- ====== NIEUW TICKET FORM ====== -->
    <template id="portal_ticket_new" name="Create Ticket">
        <t t-call="portal.portal_layout">
            <div class="container mt-4">
                <h2>Create Support Ticket</h2>

                <form action="/my/tickets/create" method="post">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <div class="mb-3">
                        <label class="form-label">Subject</label>
                        <input type="text" name="subject" class="form-control" required="required"/>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea name="description" class="form-control" rows="5" required="required"/>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Priority</label>
                        <select name="priority" class="form-select">
                            <option value="0">Low</option>
                            <option value="1" selected="selected">Normal</option>
                            <option value="2">High</option>
                            <option value="3">Urgent</option>
                        </select>
                    </div>

                    <button class="btn btn-primary">Submit Ticket</button>

                </form>
            </div>
        </t>
    </template>

</odoo>